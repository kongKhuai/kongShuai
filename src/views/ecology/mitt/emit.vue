<!--
 * @Author: 16651618507@163.com
 * @Date: 2024-04-18 11:02:27
 * @LastEditors: 16651618507@163.com
 * @LastEditTime: 2024-04-18 20:27:32
 * @FilePath: \new-plus\src\views\ecology\mitt\emit.vue
 * @Description: 
 * 
-->
<template>
  <div>
    æ´¾å‘ï¼š
    <br />
    <el-button type="primary" @click="emit('message-A', 'Açš„æ•°æ®-mittå…¨å±€é€šè®¯æ¨¡å—')"
      >æ´¾å‘ï¼š.emit('message-A', 'Açš„æ•°æ®-mittå…¨å±€é€šè®¯æ¨¡å—')</el-button
    >
    <el-button type="primary" @click="emit('message-B', 'Bçš„æ•°æ®-mittå…¨å±€é€šè®¯æ¨¡å—')"
      >æ´¾å‘ï¼š.emit('message-B', 'Bçš„æ•°æ®-mittå…¨å±€é€šè®¯æ¨¡å—')</el-button
    >
    <el-divider />

    <el-button type="warning" @click="off('message-A')"
      >å–æ¶ˆå•ä¸ªç›‘å¬ï¼šemitter.off(''message-A', onFoo)
    </el-button>
    <el-button type="warning" @click="off('message-B')"
      >å–æ¶ˆå•ä¸ªç›‘å¬ï¼šemitter.off(''message-B', onFoo)
    </el-button>
    <el-divider />

    <el-button type="danger" @click="allClear">å–æ¶ˆå…¨éƒ¨ç›‘å¬emitter.all.clear()</el-button>
  </div>
</template>
<script lang="ts" setup>
import emitter from '@/utils/mitt'
import callback from './callback'
// const mitt = emitter()
/**
 * æ´¾å‘æ•°æ®
 * ---
 * @description:
 * @param {string} emitName string æ´¾å‘åç§°
 * @param {*} val string
 * @return {*}
 */
function emit(emitName: string, val: string) {
  emitter.emit(emitName, val)
}
/**
 * @description: å–æ¶ˆå•ä¸ªç›‘å¬
 * @param {*} emitName
 * @return {*}
 */
function off(emitName: string) {
  try {
    emitter.off(emitName, callback)
  } catch (err) {
    console.log('ğŸš€ ~ off ~ err:', err)
  }
  console.log('ğŸš€ ~ off ~ callback:', emitName, callback)
}
/**
 * @description: å–æ¶ˆå…¨éƒ¨ç›‘å¬
 */
function allClear() {
  emitter.all.clear()
}
</script>
<style scoped></style>
